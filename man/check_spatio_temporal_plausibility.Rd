% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_spatio_temporal_plausibility.R
\name{check_spatio_temporal_plausibility}
\alias{check_spatio_temporal_plausibility}
\title{Flag spatio-temporal plausibility}
\usage{
check_spatio_temporal_plausibility(
  predictions,
  species_info_temporal,
  species_ranges,
  plot_info,
  tz = "UTC"
)
}
\arguments{
\item{predictions}{data.frame with columns: species, timestamp, plot_id}

\item{species_info_temporal}{data.frame with temporal info: species, start_date, end_date, start_hour, end_hour}

\item{species_ranges}{sf object with spatial ranges (polygons) and column \code{species}}

\item{plot_info}{data.frame with plot_id and coordinates: lat, lon}

\item{tz}{time zone for time-of-day checks}
}
\value{
original data with logical flag columns: season, time_of_day, range, and plausibility_score (sum of flags)
}
\description{
Flag spatio-temporal plausibility
}
\examples{
library(lubridate)
library(sf)

# Example predictions
predictions <- data.frame(
  species = c("speciesA", "speciesB"),
  timestamp = ymd_hms(c("2024-07-19 11:20:00", "2024-07-22 12:40:00"), tz = "UTC"),
  plot_id = c("plot1", "plot2")
)

# Temporal species info
species_info_temporal <- data.frame(
  species = c("speciesA", "speciesB"),
  start_date = c("06-01", "07-01"),
  end_date   = c("08-31", "08-31"),
  start_hour = c(6, 8),
  end_hour   = c(20, 18)
)

# Plot info with point coordinates
plot_info <- data.frame(
  plot_id = c("plot1", "plot2"),
  lat = c(50.25, 51.25),
  lon = c(10.25, 11.25)
)

# Spatial ranges as polygons
polyA <- st_polygon(list(matrix(c(
  9.0, 49.0,
  9.0, 51.0,
  11.0, 51.0,
  11.0, 49.0,
  9.0, 49.0
), ncol = 2, byrow = TRUE)))

polyB <- st_polygon(list(matrix(c(
  10.0, 50.0,
  10.0, 52.0,
  12.0, 52.0,
  12.0, 50.0,
  10.0, 50.0
), ncol = 2, byrow = TRUE)))

species_ranges <- st_sf(
  species = c("speciesA", "speciesB"),
  geometry = st_sfc(list(polyA, polyB), crs = 4326)
)

# Run plausibility check
result <- check_spatio_temporal_plausibility(
  predictions, species_info_temporal, species_ranges, plot_info, tz = "UTC"
)

print(result[, c("species", "season", "time_of_day", "range", "plausibility_score")])

}
