% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_validation_segments.R
\name{create_validation_segments}
\alias{create_validation_segments}
\title{Create Validation Segments from Model Predictions}
\usage{
create_validation_segments(
  input_csv,
  audio_folder,
  output_folder,
  segment_length = 4,
  n_per_class = 30,
  output_csv = NULL
)
}
\arguments{
\item{input_csv}{Path to the CSV file with model predictions. The file must
contain at least \code{offset}, \code{filename}, and one or more numeric prediction
columns (species scores).}

\item{audio_folder}{Directory containing the source audio files referenced
in the \code{filename} column of the CSV.}

\item{output_folder}{Directory where extracted segments will be written.
Subfolders are created per species.}

\item{segment_length}{Numeric, length of each segment in seconds.}

\item{n_per_class}{Integer, maximum number of segments to extract per species.}

\item{output_csv}{Optional path to a CSV file summarizing the generated
validation segments. If \code{NULL}, no summary is written. Default: \code{NULL}.}
}
\value{
Invisibly returns a \code{data.frame} summarizing the generated segments, with
columns:
\describe{
\item{file}{The extracted WAV filename}
\item{species}{The predicted species label (from the column name)}
\item{score}{The prediction score used in the filename}
}

In addition, the function creates directories in \code{output_folder} (one per
species) and writes extracted WAV segments into them. If \code{output_csv} is
provided, it also writes a summary CSV file.
}
\description{
This function reads a CSV file containing machine learning predictions
for audio files, selects top segments per species, and exports fixed-length
WAV clips into species-specific folders for manual validation.
}
\details{
The \code{offset} column in \code{input_csv} must encode startâ€“end times in seconds
using the format \code{"start - >end"} (e.g. \code{"12.5-16.5"}).
Species columns are detected automatically as numeric columns that are not
\code{offset}, \code{prediction}, \code{start}, \code{end}, or \code{filename}.

Segment filenames are created as: \verb{<original_filename>_<score>.wav}, where
\code{score} is the rounded prediction score.
}
\examples{
\dontrun{
create_validation_segments(
  input_csv = "results.csv",
  audio_folder = "audio/",
  output_folder = "segments/",
  segment_length = 4,
  n_per_class = 30,
  output_csv = "segments/validation_segments.csv"
)
}

}
